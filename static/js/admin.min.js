Array.prototype.filter||(Array.prototype.filter=function(e){"use strict";if(void 0===this||null===this)throw new TypeError;var t=Object(this),n=t.length>>>0;if("function"!=typeof e)throw new TypeError;for(var c=[],i=arguments[1],o=0;o<n;o++)if(o in t){var l=t[o];e.call(i,l,o,t)&&c.push(l)}return c});var WebcomAdmin={};WebcomAdmin.__init__=function(e){e('input[type="file"]').parents("form").attr("enctype","multipart/form-data"),e('input[type="file"]').parents("form").attr("encoding","multipart/form-data")},WebcomAdmin.shortcodeTool=function(e){cls=this,cls.metabox=e("#shortcodes-metabox"),cls.metabox.length<1?console.log("no meta"):(cls.form=cls.metabox.find("form"),cls.search=cls.metabox.find("#shortcode-search"),cls.button=cls.metabox.find("button"),cls.results=cls.metabox.find("#shortcode-results"),cls.select=cls.metabox.find("#shortcode-select"),cls.form_url=cls.metabox.find("#shortcode-form").val(),cls.text_url=cls.metabox.find("#shortcode-text").val(),cls.shortcodes=function(){var t=[];return cls.select.children(".shortcode").each(function(){t.push(e(this).val())}),t}(),cls.shortcodeAction=function(e){var t="["+e+"]";send_to_editor(t)},cls.searchAction=function(){cls.results.children().remove();var t=cls.search.val();if(!(t.length<1)){var n=cls.shortcodes.filter(function(e,n,c){return e.match(t)});n.length>1&&cls.results.removeClass("empty"),e(n).each(function(){var t=e("<li />"),n=e("<a />");n.attr("href","#"),n.addClass("shortcode"),n.text(this.valueOf()),t.append(n),cls.results.append(t)}),n.length>1?cls.results.removeClass("empty"):cls.results.addClass("empty")}},cls.buttonAction=function(){cls.searchAction()},cls.itemAction=function(){var t=e(this).text();return cls.shortcodeAction(t),!1},cls.selectAction=function(){var t=e(this).find(".shortcode:selected");if(!(t.length<1)){var n=t.val();cls.shortcodeAction(n)}},cls.results.width(cls.search.outerWidth()),cls.search.keyup(function(e){if(cls.searchAction(),13==e.keyCode)return!1}),cls.button.click(cls.buttonAction),cls.select.change(cls.selectAction),cls.results.find("li a.shortcode").live("click",cls.itemAction))},WebcomAdmin.themeOptions=function(e){cls=this,cls.active=null,cls.parent=e(".i-am-a-fancy-admin"),cls.sections=e(".i-am-a-fancy-admin .fields .section"),cls.buttons=e(".i-am-a-fancy-admin .sections .section a"),this.showSection=function(t){var n=e(this),c=n.attr("href"),i=e(c);return cls.buttons.removeClass("active"),n.addClass("active"),cls.active.hide(),cls.active=i,cls.active.show(),history.pushState({},"",n.attr("href")),cls.parent.find('input[name="_wp_http_referer"]').val(window.location),!1},this.__init__=function(){cls.active=cls.sections.first(),cls.sections.not(cls.active).hide(),cls.buttons.first().addClass("active"),cls.buttons.click(this.showSection),window.location.hash&&cls.buttons.filter('[href="'+window.location.hash+'"]').click();var t=setInterval(function(){e(".updated").fadeOut(1e3),clearInterval(t)},2e3)},cls.parent.length>0&&cls.__init__()},WebcomAdmin.centerpieceAdmin=function(e){function t(){return e(checkedContentTypeSelector+":checked")}function n(e){var t=0,n=e.match(/^ss_[\w-]+\[(\d)\][\w-]*$/i);return n&&"undefined"!==n[1]&&(t=n[1]),parseInt(t,10)}function c(){var e=t();h.val(e.length)}function i(){for(var c=[],i=t(),o=0;o<i.length;o++){var l=n(e(i[o]).attr("name"));c.push(l)}var s=c.join(",");$slideOrderInput.val(s)}function o(){var e=b.find(".custom_repeatable"),t=e.find(".repeatable-remove");e.length<2?t.hide():t.show()}function l(){b.sortable({handle:".meta-handle",placeholder:"sortable-placeholder",sort:function(t,n){e(".sortable-placeholder").height(e(this).find(".ui-sortable-helper").height())},update:function(e,t){i()},tolerance:"pointer"})}function s(t){t.preventDefault(),e(t.target).parent(".custom_repeatable").toggleClass("closed")}function a(t){t.preventDefault();for(var c,i,o=e(t.target),l=e(checkedContentTypeSelector),s=v.clone(),a=[],r=0;r<l.length;r++){var f=n(e(l[r]).attr("name"));a.push(f)}i=Math.max.apply(Math,a),c=i+1,s.find("textarea, input").attr("name",function(e,t){if(t)return t.replace(p,c)}).end().find("label").attr("for",function(e,t){if(t)return t.replace(p,c)}).end().find("textarea, input").addBack().attr("id",function(e,t){if(t)return t.replace(p,c)}),s.insertAfter(o.prev(".custom_repeatable")),d()}function r(t){t.preventDefault(),e(t.target).parent().remove(),d()}function d(){c(),i(),o()}function f(){l(),u.hide(),d()}var u,h,m,p,v,b;u=e("#slider-slides-settings-count"),h=e("#ss_slider_slidecount"),$slideOrderInput=e("#ss_slider_slideorder"),m="99999",p=new RegExp(m),v=e("#custom_repeatable_ss_"+m).detach(),b=e("#ss_slides_all"),checkedContentTypeSelector='input[name^="ss_type_of_content["]',f(),b.on("click",".custom_repeatable .meta-handle",s).on("change",checkedContentTypeSelector,d).on("click",".repeatable-add",a).on("click",".repeatable-remove",r)},WebcomAdmin.subheaderAdmin=function(e){e("#spotlight_metabox").length>0&&e('<tr><td colspan="2" style="padding: 2px 10px;"><strong>Note: Max character count for Spotlights is 200. Going over this character limit will cause the subheader content to be cut short.</strong></td></tr>').appendTo("#post-status-info tbody")},WebcomAdmin.fileUploader=function(e){e("#post-body").on("click",".meta-file-upload",function(t){t.preventDefault();var n,c=e(t.target),i=c.parents(".meta-file-wrap"),o=i.find(".meta-file-field"),l=i.find(".meta-file-delete"),s=i.find(".meta-file-preview");(n=wp.media({title:"Select or Upload a File",button:{text:"Use this file"},multiple:!1})).on("select",function(){var e=n.state().get("selection").first().toJSON();s.html('<img src="'+e.iconOrThumb+'"><br>'+e.filename),o.val(e.id),c.addClass("hidden"),l.removeClass("hidden")}),n.open()}).on("click",".meta-file-delete",function(t){t.preventDefault();var n=e(t.target),c=n.parents(".meta-file-wrap"),i=c.find(".meta-file-field"),o=c.find(".meta-file-upload");c.find(".meta-file-preview").html("No file selected."),o.removeClass("hidden"),n.addClass("hidden"),i.val("")})},WebcomAdmin.collegesUpload=function(e){var t,n=e("#colleges_header_image_upload"),c=e("#colleges_header_image_remove"),i=e("#colleges_header_image"),o=e("#colleges_header_image_preview");n.click(function(){t?t.open():((t=wp.media.frames.file_frame=wp.media({title:jQuery(this).data("uploader_title"),button:{text:jQuery(this).data("uploader_button_text")},multiple:!1})).on("select",function(){var e=t.state().get("selection").first().toJSON();i.val(e.url),o.attr("src",e.url)}),t.open())}),c.click(function(){i.val(null),o.attr("src","")})},function(e){WebcomAdmin.__init__(e),WebcomAdmin.themeOptions(e),WebcomAdmin.shortcodeTool(e),WebcomAdmin.centerpieceAdmin(e),WebcomAdmin.subheaderAdmin(e),WebcomAdmin.fileUploader(e),WebcomAdmin.collegesUpload(e)}(jQuery);