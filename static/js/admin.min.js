Array.prototype.filter||(Array.prototype.filter=function(e){"use strict";if(void 0===this||null===this)throw new TypeError;var t=Object(this),n=t.length>>>0;if("function"!=typeof e)throw new TypeError;for(var i=[],c=arguments[1],o=0;o<n;o++)if(o in t){var l=t[o];e.call(c,l,o,t)&&i.push(l)}return i});var WebcomAdmin={};WebcomAdmin.__init__=function(e){e('input[type="file"]').parents("form").attr("enctype","multipart/form-data"),e('input[type="file"]').parents("form").attr("encoding","multipart/form-data")},WebcomAdmin.shortcodeTool=function(e){return cls=this,cls.metabox=e("#shortcodes-metabox"),cls.metabox.length<1?void console.log("no meta"):(cls.form=cls.metabox.find("form"),cls.search=cls.metabox.find("#shortcode-search"),cls.button=cls.metabox.find("button"),cls.results=cls.metabox.find("#shortcode-results"),cls.select=cls.metabox.find("#shortcode-select"),cls.form_url=cls.metabox.find("#shortcode-form").val(),cls.text_url=cls.metabox.find("#shortcode-text").val(),cls.shortcodes=function(){var t=[];return cls.select.children(".shortcode").each(function(){t.push(e(this).val())}),t}(),cls.shortcodeAction=function(e){var t="["+e+"]";send_to_editor(t)},cls.searchAction=function(){cls.results.children().remove();var t=cls.search.val();if(!(t.length<1)){var n=cls.shortcodes.filter(function(e,n,i){return e.match(t)});n.length>1&&cls.results.removeClass("empty"),e(n).each(function(){var t=e("<li />"),n=e("<a />");n.attr("href","#"),n.addClass("shortcode"),n.text(this.valueOf()),t.append(n),cls.results.append(t)}),n.length>1?cls.results.removeClass("empty"):cls.results.addClass("empty")}},cls.buttonAction=function(){cls.searchAction()},cls.itemAction=function(){var t=e(this).text();return cls.shortcodeAction(t),!1},cls.selectAction=function(){var t=e(this).find(".shortcode:selected");if(!(t.length<1)){var n=t.val();cls.shortcodeAction(n)}},cls.results.width(cls.search.outerWidth()),cls.search.keyup(function(e){if(cls.searchAction(),13==e.keyCode)return!1}),cls.button.click(cls.buttonAction),cls.select.change(cls.selectAction),void cls.results.find("li a.shortcode").live("click",cls.itemAction))},WebcomAdmin.themeOptions=function(e){cls=this,cls.active=null,cls.parent=e(".i-am-a-fancy-admin"),cls.sections=e(".i-am-a-fancy-admin .fields .section"),cls.buttons=e(".i-am-a-fancy-admin .sections .section a"),this.showSection=function(t){var n=e(this),i=n.attr("href"),c=e(i);cls.buttons.removeClass("active"),n.addClass("active"),cls.active.hide(),cls.active=c,cls.active.show(),history.pushState({},"",n.attr("href"));var o=cls.parent.find('input[name="_wp_http_referer"]');return o.val(window.location),!1},this.__init__=function(){cls.active=cls.sections.first(),cls.sections.not(cls.active).hide(),cls.buttons.first().addClass("active"),cls.buttons.click(this.showSection),window.location.hash&&cls.buttons.filter('[href="'+window.location.hash+'"]').click();var t=setInterval(function(){e(".updated").fadeOut(1e3),clearInterval(t)},2e3)},cls.parent.length>0&&cls.__init__()},WebcomAdmin.centerpieceAdmin=function(e){function t(){return e(checkedContentTypeSelector+":checked")}function n(e){var t=0,n=e.match(/^ss_[\w-]+\[(\d)\][\w-]*$/i);return n&&"undefined"!==n[1]&&(t=n[1]),parseInt(t,10)}function i(){var e=t();m.val(e.length)}function c(){for(var i=[],c=t(),o=0;o<c.length;o++){var l=e(c[o]),a=n(l.attr("name"));i.push(a)}var s=i.join(",");$slideOrderInput.val(s)}function o(){var e=_.find(".custom_repeatable"),t=e.find(".repeatable-remove");e.length<2?t.hide():t.show()}function l(){_.sortable({handle:".meta-handle",placeholder:"sortable-placeholder",sort:function(t,n){e(".sortable-placeholder").height(e(this).find(".ui-sortable-helper").height())},update:function(e,t){c()},tolerance:"pointer"})}function a(t){t.preventDefault();var n=e(t.target),i=n.parent(".custom_repeatable");i.toggleClass("closed")}function s(t){t.preventDefault();for(var i,c,o=e(t.target),l=e(checkedContentTypeSelector),a=b.clone(),s=[],r=0;r<l.length;r++){var u=e(l[r]),f=n(u.attr("name"));s.push(f)}c=Math.max.apply(Math,s),i=c+1,a.find("textarea, input").attr("name",function(e,t){if(t)return t.replace(v,i)}).end().find("label").attr("for",function(e,t){if(t)return t.replace(v,i)}).end().find("textarea, input").addBack().attr("id",function(e,t){if(t)return t.replace(v,i)}),a.insertAfter(o.prev(".custom_repeatable")),d()}function r(t){t.preventDefault();var n=e(t.target);n.parent().remove(),d()}function d(){i(),c(),o()}function u(){l(),h.hide(),d()}function f(){h=e("#slider-slides-settings-count"),m=e("#ss_slider_slidecount"),$slideOrderInput=e("#ss_slider_slideorder"),p="99999",v=new RegExp(p),b=e("#custom_repeatable_ss_"+p).detach(),_=e("#ss_slides_all"),checkedContentTypeSelector='input[name^="ss_type_of_content["]',u(),_.on("click",".custom_repeatable .meta-handle",a).on("change",checkedContentTypeSelector,d).on("click",".repeatable-add",s).on("click",".repeatable-remove",r)}var h,m,p,v,b,_;f()},WebcomAdmin.subheaderAdmin=function(e){e("#spotlight_metabox").length>0&&e('<tr><td colspan="2" style="padding: 2px 10px;"><strong>Note: Max character count for Spotlights is 200. Going over this character limit will cause the subheader content to be cut short.</strong></td></tr>').appendTo("#post-status-info tbody")},WebcomAdmin.fileUploader=function(e){function t(t){t.preventDefault();var n,i=e(t.target),c=i.parents(".meta-file-wrap"),o=c.find(".meta-file-field"),l=c.find(".meta-file-delete"),a=c.find(".meta-file-preview");n=wp.media({title:"Select or Upload a File",button:{text:"Use this file"},multiple:!1}),n.on("select",function(){var e=n.state().get("selection").first().toJSON();a.html('<img src="'+e.iconOrThumb+'"><br>'+e.filename),o.val(e.id),i.addClass("hidden"),l.removeClass("hidden")}),n.open()}function n(t){t.preventDefault();var n=e(t.target),i=n.parents(".meta-file-wrap"),c=i.find(".meta-file-field"),o=i.find(".meta-file-upload"),l=i.find(".meta-file-preview");l.html("No file selected."),o.removeClass("hidden"),n.addClass("hidden"),c.val("")}var i=e("#post-body");i.on("click",".meta-file-upload",t).on("click",".meta-file-delete",n)},WebcomAdmin.collegesUpload=function(e){var t,n=e("#colleges_header_image_upload"),i=e("#colleges_header_image_remove"),c=e("#colleges_header_image"),o=e("#colleges_header_image_preview"),l=function(){return t?void t.open():(t=wp.media.frames.file_frame=wp.media({title:jQuery(this).data("uploader_title"),button:{text:jQuery(this).data("uploader_button_text")},multiple:!1}),t.on("select",function(){var e=t.state().get("selection").first().toJSON();c.val(e.url),o.attr("src",e.url)}),void t.open())},a=function(){c.val(null),o.attr("src","")};n.click(l),i.click(a)},function(e){WebcomAdmin.__init__(e),WebcomAdmin.themeOptions(e),WebcomAdmin.shortcodeTool(e),WebcomAdmin.centerpieceAdmin(e),WebcomAdmin.subheaderAdmin(e),WebcomAdmin.fileUploader(e),WebcomAdmin.collegesUpload(e)}(jQuery);